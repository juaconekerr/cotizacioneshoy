<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Iniciar Sesión</title>
    <meta
      name="description"
      content="Inicia sesión en tu cuenta o regístrate si no tienes una cuenta."
    />
    <meta name="keywords" content="iniciar sesión, registro, cuenta, usuario" />
    <meta name="author" content="Tu Nombre" />
    <link rel="canonical" href="https://tu-sitio.com/iniciarsesion.html" />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap"
      rel="stylesheet"
    />
    <script src="https://unpkg.com/@tailwindcss/browser@4"></script>
    <style>
      /* Estilos personalizados para la página de iniciar sesión */
      body {
        background-color: #f7fafc; /* Color de fondo muy claro */
      }
      .contenedor {
        max-width: 1200px; /* Ancho máximo del contenido */
        margin: 0 auto; /* Centrar el contenido */
        padding: 2rem; /* Espaciado interior */
      }
      .header {
        display: flex;
        justify-content: space-between; /* Espacio entre el título y el botón */
        align-items: center; /* Alinear verticalmente */
        margin-bottom: 2rem; /* Espacio debajo del header */
      }
      .titulo-principal {
        font-size: 3rem; /* Tamaño de fuente grande */
        font-weight: 700; /* Negrita */
        color: #1a202c; /* Color de texto muy oscuro */
      }
      .subtitulo-principal {
        font-size: 1.25rem; /* Tamaño de fuente mediano */
        color: #4a5568; /* Color de texto un poco más claro */
        margin-bottom: 4rem; /* Espacio debajo del subtítulo */
        text-align: center;
      }
      .formulario-sesion {
        background-color: #ffffff; /* Fondo blanco para el formulario */
        border-radius: 0.75rem; /* Bordes redondeados */
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1),
          0 2px 4px -1px rgba(0, 0, 0, 0.06); /* Sombra suave */
        padding: 2rem; /* Espaciado interior en el formulario */
        transition: transform 0.2s ease, box-shadow 0.2s ease; /* Transiciones suaves */
        margin-bottom: 2rem; /* Espacio debajo del formulario */
        max-width: 400px; /* Ancho máximo del formulario */
        margin: 2rem auto; /* Centrar el formulario */
      }
      .formulario-sesion:hover {
        transform: translateY(
          -0.25rem
        ); /* Ligeramente hacia arriba al pasar el mouse */
        box-shadow: 0 6px 8px -1px rgba(0, 0, 0, 0.15),
          0 3px 5px -1px rgba(0, 0, 0, 0.1); /* Sombra más pronunciada al pasar el mouse */
      }
      .formulario-sesion label {
        display: block;
        font-size: 1rem;
        color: #4a5568;
        margin-bottom: 0.5rem;
      }
      .formulario-sesion input {
        width: 100%;
        padding: 0.75rem;
        border: 1px solid #cbd5e0;
        border-radius: 0.375rem;
        font-size: 1rem;
        margin-bottom: 1rem;
      }
      .formulario-sesion button {
        background-color: #3b82f6;
        color: white;
        padding: 0.75rem 1.5rem;
        font-size: 1rem;
        font-weight: 600;
        border: none;
        border-radius: 0.375rem;
        cursor: pointer;
        transition: background-color 0.2s ease;
        display: block;
        margin: 0 auto 1rem; /* Centrar el botón y agregar espacio inferior */
      }
      .formulario-sesion button:hover {
        background-color: #2563eb;
      }
      .registro-link {
        display: block;
        text-align: center;
        margin-top: 1rem;
        font-size: 1rem;
        color: #3b82f6;
        text-decoration: none;
        font-weight: 600;
      }
      .registro-link:hover {
        color: #2563eb;
        text-decoration: underline;
      }
      .menu {
        position: relative;
        display: inline-block;
      }
      .menu-boton {
        background-color: #3b82f6; /* Fondo azul */
        color: white; /* Texto blanco */
        padding: 0.75rem 1.5rem; /* Espaciado interior */
        font-size: 1rem; /* Tamaño de fuente */
        font-weight: 600; /* Negrita */
        border: none; /* Sin borde */
        border-radius: 0.375rem; /* Bordes redondeados */
        cursor: pointer; /* Cursor de mano */
        transition: background-color 0.2s ease; /* Transición suave */
      }
      .menu-boton:hover {
        background-color: #2563eb; /* Fondo azul más oscuro al pasar el mouse */
      }
      .menu-contenido {
        display: none; /* Oculto por defecto */
        position: absolute;
        background-color: white; /* Fondo blanco */
        min-width: 12rem; /* Ancho mínimo */
        box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2); /* Sombra */
        border-radius: 0.375rem; /* Bordes redondeados */
        z-index: 1; /* Asegurar que esté por encima de otros elementos */
        top: 100%; /* Desplegar el contenido del menú por debajo del botón */
        right: 0; /* Alinear el contenido del menú a la derecha */
      }
      .menu-contenido a {
        color: #1a202c; /* Color de texto oscuro */
        padding: 1rem; /* Espaciado interior */
        text-decoration: none; /* Sin subrayado */
        display: block; /* Mostrar como bloque */
        font-weight: 600; /* Negrita */
      }
      .menu-contenido a:hover {
        background-color: #f1f1f1; /* Fondo gris claro al pasar el mouse */
      }
      .menu:hover .menu-contenido {
        display: block; /* Mostrar menú al pasar el mouse */
      }
      .menu:hover .menu-boton {
        background-color: #2563eb; /* Mantener el color del botón al pasar el mouse sobre el menú */
      }
      .welcome-message {
        display: none;
        background-color: #e6fffa;
        color: #2c7a7b;
        padding: 20px;
        border: 1px solid #b2f5ea;
        border-radius: 10px;
        text-align: center;
        margin-top: 20px;
        animation: fadeIn 1s ease-in-out;
      }
      .welcome-message p {
        margin: 0;
        font-size: 18px;
        font-weight: 500;
      }
      .welcome-message button {
        margin-top: 10px;
        background-color: #38b2ac;
        color: #fff;
        padding: 10px 20px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
      }
      .welcome-message button:hover {
        background-color: #319795;
      }
      .error-message {
        color: red;
        text-align: center;
        margin-top: 10px;
      }
      @keyframes fadeIn {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }
    </style>
  </head>
  <body class="bg-gray-100 font-sans antialiased">
    <div class="contenedor">
      <div class="header">
        <h1 class="titulo-principal">Iniciar Sesión</h1>
        <!-- Menu de navegación -->
        <div class="menu">
          <button class="menu-boton">Menú</button>
          <div class="menu-contenido">
            <a href="buscador.html">Buscador</a>
            <a href="noticias.html">Noticias</a>
            <a href="contacto.html">Contacto</a>
            <a href="iniciarsesion.html">Iniciar Sesion</a>
          </div>
        </div>
      </div>
      <div class="formulario-sesion">
        <form id="login-form">
          <label for="email">Correo Electrónico</label>
          <input
            type="email"
            id="email"
            name="email"
            placeholder="Tu correo electrónico"
            required
          />
          <label for="password">Contraseña</label>
          <input
            type="password"
            id="password"
            name="password"
            placeholder="Tu contraseña"
            required
          />
          <button type="submit">Iniciar Sesión</button>
          <div id="mensaje-error" class="error-message"></div>
          <!-- Mover mensaje de error aquí -->
          <div id="welcome-message" class="welcome-message">
            <p>Bienvenido, has iniciado sesión con éxito.</p>
            <button id="close-welcome-message">Cerrar mensaje</button>
          </div>
        </form>
        <a href="registrarse.html" class="registro-link"
          >¿No tienes una cuenta? Regístrate</a
        >
      </div>
    </div>
    <script type="module">
      // Import the functions you need from the SDKs you need
      import { initializeApp } from "https://www.gstatic.com/firebasejs/11.5.0/firebase-app.js";
      import {
        getAuth,
        signInWithEmailAndPassword,
      } from "https://www.gstatic.com/firebasejs/11.5.0/firebase-auth.js";

      // Your web app's Firebase configuration
      const firebaseConfig = {
        apiKey: "AIzaSyChpFnp833eYISgcOBCmrmqb0a2iLy82WU",
        authDomain: "cotizaciones-hoy.firebaseapp.com",
        projectId: "cotizaciones-hoy",
        storageBucket: "cotizaciones-hoy.firebasestorage.app",
        messagingSenderId: "104412367418",
        appId: "1:104412367418:web:0962a9c13738e088610303",
        measurementId: "G-R5KRC3LZ70",
      };

      // Initialize Firebase
      const app = initializeApp(firebaseConfig);
      const auth = getAuth(app);

      // Obtén el formulario y los elementos de mensaje
      const loginForm = document.getElementById("login-form");
      const mensajeError = document.getElementById("mensaje-error");
      const welcomeMessage = document.getElementById("welcome-message");
      const closeWelcomeMessageButton = document.getElementById(
        "close-welcome-message"
      );

      // Función para mostrar mensajes de error
      function showError(message) {
        mensajeError.textContent = message;
        mensajeError.style.display = "block";
      }

      // Escucha el evento submit del formulario
      loginForm.addEventListener("submit", (event) => {
        event.preventDefault(); // Evita que se recargue la página

        // Obtén los valores del formulario
        const email = document.getElementById("email").value;
        const password = document.getElementById("password").value;

        // Inicia sesión con correo electrónico y contraseña
        signInWithEmailAndPassword(auth, email, password)
          .then((userCredential) => {
            // Inicio de sesión exitoso
            const user = userCredential.user;
            console.log("Usuario inició sesión:", user);
            mensajeError.style.display = "none"; // Ocultar mensaje de error si existe
            welcomeMessage.style.display = "block"; // Mostrar el mensaje de bienvenida
          })
          .catch((error) => {
            // Maneja los errores
            const errorCode = error.code;
            const errorMessage = error.message;
            console.error("Error al iniciar sesión:", errorCode, errorMessage);
            switch (errorCode) {
              case "auth/wrong-password":
                showError("La contraseña es incorrecta.");
                break;
              case "auth/user-not-found":
                showError(
                  "No se encontró una cuenta con este correo electrónico."
                );
                break;
              case "auth/invalid-email":
                showError("El correo electrónico no es válido.");
                break;
              default:
                showError("Error al iniciar sesión. Inténtalo de nuevo.");
            }
          });
      });

      // Escucha el evento click del botón para cerrar el mensaje de bienvenida
      closeWelcomeMessageButton.addEventListener("click", () => {
        welcomeMessage.style.display = "none"; // Ocultar el mensaje de bienvenida
      });
    </script>
  </body>
</html>
